import{a as g}from"./chunk-JKZOWFQR.js";import{a as K}from"./chunk-LIO3XGLU.js";import{a as D,c as q,f as V,i as W,p as N}from"./chunk-GSFLE64X.js";import{$ as y,A as s,Ba as $,C as _,D as B,H as u,M as c,N as r,O as n,P as T,S as E,T as d,U as p,V as H,X as a,Y as f,Z as O,_ as x,aa as k,ba as L,ha as P,k as h,n as b,oa as F,pa as A,r as M,s as w,sa as j,ua as S,wa as z,z as v,za as R}from"./chunk-FWRNMML4.js";var C=class t{constructor(i){this.http=i}peliculas=[];query="";baseUrl="https://api.themoviedb.org/3";searchMovies(i){return this.http.get(`${this.baseUrl}/search/movie`,{params:{api_key:g.tmdbApiKey,query:i}})}getMovieDetails(i){return this.http.get(`${this.baseUrl}/movie/${i}`,{params:{api_key:g.tmdbApiKey}})}static \u0275fac=function(e){return new(e||t)(b(S))};static \u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"})};var I=class t{constructor(i){this.http=i}libros=[];query="";apiKey=g.booksApiKey;Base_url="https://www.googleapis.com/books/v1/volumes?q=";buscarLibros(i){let e=`${this.Base_url}${i}&key=${this.apiKey}`;return console.log(`${this.Base_url}?q=intitle:${i}}&key=${this.apiKey}`),this.http.get(e)}static \u0275fac=function(e){return new(e||t)(b(S))};static \u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"})};function Y(t,i){if(t&1&&T(0,"img",17),t&2){let e=p().$implicit;c("alt",L(e.title))("src","https://image.tmdb.org/t/p/w500"+e.poster_path,v)}}function Z(t,i){if(t&1&&(r(0,"p")(1,"strong"),a(2,"Sinopsis: "),n(),a(3),n()),t&2){let e=p().$implicit;s(3),f(e.overview)}}function ee(t,i){t&1&&(r(0,"p")(1,"em"),a(2,"No hay sinopsis disponible."),n()())}function te(t,i){if(t&1){let e=E();r(0,"div",13)(1,"h3"),a(2),n(),r(3,"button",14),d("click",function(){let m=M(e).$implicit,l=p(2);return w(l.irAResena(m))}),a(4,"Comentar"),n(),u(5,Y,1,3,"img",15)(6,Z,4,1,"p",16),r(7,"p")(8,"strong"),a(9,"Fecha de lanzamiento: "),r(10,"small"),a(11),n()()(),u(12,ee,3,0,"ng-template",null,0,P),n()}if(t&2){let e=i.$implicit,o=H(13);s(2),f(e.title),s(3),c("ngIf",e.poster_path),s(),c("ngIf",e.overview)("ngIfElse",o),s(5),f(e.release_date)}}function ie(t,i){if(t&1&&(r(0,"section",11),u(1,te,14,5,"div",12),n()),t&2){let e=p();s(),c("ngForOf",e.movies)}}function ne(t,i){if(t&1&&T(0,"img",21),t&2){let e=p().$implicit;c("src",e.volumeInfo.imageLinks.thumbnail,v)}}function oe(t,i){if(t&1&&(r(0,"p")(1,"strong"),a(2,"Descripci\xF3n:"),n(),a(3),n()),t&2){let e=p().$implicit;s(3),O(" ",e.volumeInfo==null?null:e.volumeInfo.description)}}function re(t,i){t&1&&(r(0,"p")(1,"em"),a(2,"No hay descripci\xF3n disponible."),n()())}function ae(t,i){if(t&1&&(r(0,"a",22),a(1," Vista previa "),n()),t&2){let e=p().$implicit;c("href",e.volumeInfo.previewLink,v)}}function se(t,i){if(t&1){let e=E();r(0,"div")(1,"h3"),a(2),n(),r(3,"button",14),d("click",function(){let m=M(e).$implicit,l=p(2);return w(l.irAResena(m))}),a(4,"Comentar"),n(),u(5,ne,1,1,"img",19),r(6,"p")(7,"strong"),a(8,"Autor: "),n(),a(9),n(),u(10,oe,4,1,"p",16)(11,re,3,0,"ng-template",null,1,P),r(13,"p")(14,"strong"),a(15,"Fecha de publicaci\xF3n: "),n(),r(16,"small"),a(17),n()(),r(18,"p"),u(19,ae,2,1,"a",20),n()()}if(t&2){let e=i.$implicit,o=H(12);s(2),f(e.volumeInfo==null?null:e.volumeInfo.title),s(3),c("ngIf",e.volumeInfo==null||e.volumeInfo.imageLinks==null?null:e.volumeInfo.imageLinks.thumbnail),s(4),O(" ",e.volumeInfo==null||e.volumeInfo.authors==null?null:e.volumeInfo.authors.join(", ")),s(),c("ngIf",e.volumeInfo.description)("ngIfElse",o),s(7),f(e.volumeInfo==null?null:e.volumeInfo.publishedDate),s(2),c("ngIf",e.volumeInfo==null?null:e.volumeInfo.previewLink)}}function le(t,i){if(t&1&&(r(0,"section",11),u(1,se,20,7,"div",18),n()),t&2){let e=p();s(),c("ngForOf",e.books)}}var G=class t{constructor(i,e,o,m){this.tmdb=i;this.auth=e;this.router=o;this.LibrosService=m}searchText="";isBookSearch=!1;isMovieSearch=!0;loading=!1;books=[];movies=[];ngOnInit(){this.tmdb.peliculas.length>0&&(this.movies=this.tmdb.peliculas)}setSearchType(i){i==="book"?(this.isBookSearch=!0,this.isMovieSearch=!1):(this.isBookSearch=!1,this.isMovieSearch=!0),this.searchText.trim()&&this.unifiedSearch()}unifiedSearch(){this.searchText.trim()&&(this.isBookSearch?this.LibrosService.buscarLibros(this.searchText).subscribe(i=>{this.LibrosService.libros=i.items,this.LibrosService.query=this.searchText,this.books=i.items,this.movies=[]}):this.tmdb.searchMovies(this.searchText).subscribe(i=>{this.tmdb.peliculas=i.results,this.tmdb.query=this.searchText,this.movies=i.results,this.books=[]}))}irAResena(i){this.router.navigate(["/resena",i.id],{state:{movie:i}})}irAMisResenas(){this.router.navigate(["/misresenas"])}async onLogout(){try{await this.auth.logout(),this.router.navigate(["/login"])}catch(i){console.error("Error al cerrar sesi\xF3n:",i)}}static \u0275fac=function(e){return new(e||t)(_(C),_(K),_(R),_(I))};static \u0275cmp=B({type:t,selectors:[["app-home"]],decls:21,vars:7,consts:[["sinSinopsis",""],["sinDescripcion",""],[1,"home-container"],[1,"botonera"],[1,"resena",3,"click"],[1,"sesion",3,"click"],[1,"search"],["type","text","placeholder","Buscar...",3,"ngModelChange","keyup.enter","ngModel"],["type","radio","name","tipoBusqueda",3,"ngModelChange","change","value","ngModel"],[1,"buscar",3,"click"],["class","results",4,"ngIf"],[1,"results"],["class","movie-card",4,"ngFor","ngForOf"],[1,"movie-card"],[1,"resenar",3,"click"],[3,"src","alt",4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"src","alt"],[4,"ngFor","ngForOf"],["alt","Portada del libro",3,"src",4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],["alt","Portada del libro",3,"src"],["target","_blank",3,"href"]],template:function(e,o){e&1&&(r(0,"div",2)(1,"header")(2,"h1"),a(3,"Cr\xF3nicas de papel y pantalla"),n(),r(4,"div",3)(5,"button",4),d("click",function(){return o.irAMisResenas()}),a(6,"Mis comentarios"),n(),r(7,"button",5),d("click",function(){return o.onLogout()}),a(8,"Cerrar sesi\xF3n"),n()()(),r(9,"section",6)(10,"input",7),k("ngModelChange",function(l){return y(o.searchText,l)||(o.searchText=l),l}),d("keyup.enter",function(){return o.unifiedSearch()}),n(),r(11,"label")(12,"input",8),k("ngModelChange",function(l){return y(o.isBookSearch,l)||(o.isBookSearch=l),l}),d("change",function(){return o.setSearchType("book")}),n(),a(13," Buscar libros "),n(),r(14,"label")(15,"input",8),k("ngModelChange",function(l){return y(o.isBookSearch,l)||(o.isBookSearch=l),l}),d("change",function(){return o.setSearchType("movie")}),n(),a(16," Buscar pel\xEDculas "),n(),r(17,"button",9),d("click",function(){return o.unifiedSearch()}),a(18,"Buscar"),n()(),u(19,ie,2,1,"section",10)(20,le,2,1,"section",10),n()),e&2&&(s(10),x("ngModel",o.searchText),s(2),c("value",!0),x("ngModel",o.isBookSearch),s(3),c("value",!1),x("ngModel",o.isBookSearch),s(4),c("ngIf",!o.isBookSearch&&o.movies.length>0),s(),c("ngIf",o.isBookSearch&&(o.books==null?null:o.books.length)))},dependencies:[j,F,A,z,$,N,D,W,q,V],styles:["input[_ngcontent-%COMP%]{display:block;width:90%;height:25px;margin:0 auto;margin-bottom:1rem;border-radius:4px;border:3px solid #000}.buscar[_ngcontent-%COMP%]{display:block;margin:0 auto;background-color:#000;color:#fff;border-color:#fff;padding:.75rem 1.5rem;font-size:1rem;border-radius:8px;cursor:pointer;transition:background-color .3s ease}h1[_ngcontent-%COMP%]{text-align:center;font-size:2rem;padding-bottom:1px}h3[_ngcontent-%COMP%]{text-align:center;font-size:2rem;padding-top:30px}.resenar[_ngcontent-%COMP%]{display:row;margin-left:0;margin-right:auto;background-color:#0d47a1;color:#fff;border-color:#fff;margin-bottom:1rem;font-size:1rem;height:30px;border-radius:4px;cursor:pointer;transition:background-color .3s ease}.botonera[_ngcontent-%COMP%]{margin:0 auto;display:flex;justify-content:space-between;padding:1rem}.botonera[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:6px;cursor:pointer;color:#fff;background-color:#007bff}.izquierda[_ngcontent-%COMP%]{background-color:#ccc;color:#333}.derecha[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}img[_ngcontent-%COMP%]{display:block;margin:0 auto;width:50%;border-radius:8px;margin-top:1rem;padding-bottom:2rem}p[_ngcontent-%COMP%]{display:block;margin:0 auto;width:50%;font-size:2rem;text-align:justify}@media (max-width: 600px){p[_ngcontent-%COMP%]{width:90%;font-size:1.2rem}}@media (min-width: 601px) and (max-width: 1024px){p[_ngcontent-%COMP%]{width:70%;font-size:1.6rem}}@media (min-width: 1025px){p[_ngcontent-%COMP%]{width:50%;font-size:2rem}}.search[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.search[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.3rem}"]})};export{G as Home};
