import{a as g}from"./chunk-JKZOWFQR.js";import{a as K}from"./chunk-LIO3XGLU.js";import{a as D,c as q,f as V,i as W,p as N}from"./chunk-GSFLE64X.js";import{$ as x,A as s,Ba as $,C as f,D as O,H as d,M as c,N as r,O as n,P as T,S as E,T as p,U as u,V as P,X as a,Y as _,Z as H,_ as y,aa as k,ba as B,ha as L,k as h,n as b,oa as F,pa as A,r as M,s as w,sa as j,ua as S,wa as z,z as v,za as R}from"./chunk-FWRNMML4.js";var C=class i{constructor(t){this.http=t}peliculas=[];query="";baseUrl="https://api.themoviedb.org/3";searchMovies(t){return this.http.get(`${this.baseUrl}/search/movie`,{params:{api_key:g.tmdbApiKey,query:t}})}getMovieDetails(t){return this.http.get(`${this.baseUrl}/movie/${t}`,{params:{api_key:g.tmdbApiKey}})}static \u0275fac=function(e){return new(e||i)(b(S))};static \u0275prov=h({token:i,factory:i.\u0275fac,providedIn:"root"})};var I=class i{constructor(t){this.http=t}libros=[];query="";apiKey=g.booksApiKey;Base_url="https://www.googleapis.com/books/v1/volumes?q=";buscarLibros(t){let e=`${this.Base_url}${t}&key=${this.apiKey}`;return console.log(`${this.Base_url}?q=intitle:${t}}&key=${this.apiKey}`),this.http.get(e)}static \u0275fac=function(e){return new(e||i)(b(S))};static \u0275prov=h({token:i,factory:i.\u0275fac,providedIn:"root"})};function Y(i,t){if(i&1&&T(0,"img",15),i&2){let e=u().$implicit;c("alt",B(e.title))("src","https://image.tmdb.org/t/p/w500"+e.poster_path,v)}}function Z(i,t){if(i&1){let e=E();r(0,"div",12)(1,"h3"),a(2),n(),r(3,"button",13),p("click",function(){let m=M(e).$implicit,l=u(2);return w(l.irAResena(m))}),a(4,"Comentar"),n(),r(5,"p"),a(6),n(),d(7,Y,1,3,"img",14),n()}if(i&2){let e=t.$implicit;s(2),_(e.title),s(4),_(e.overview),s(),c("ngIf",e.poster_path)}}function ee(i,t){if(i&1&&(r(0,"section",10),d(1,Z,8,3,"div",11),n()),i&2){let e=u();s(),c("ngForOf",e.movies)}}function te(i,t){if(i&1&&T(0,"img",20),i&2){let e=u().$implicit;c("src",e.volumeInfo.imageLinks.thumbnail,v)}}function ie(i,t){if(i&1&&(r(0,"p")(1,"strong"),a(2,"Descripci\xF3n:"),n(),a(3),n()),i&2){let e=u().$implicit;s(3),H(" ",e.volumeInfo==null?null:e.volumeInfo.description)}}function ne(i,t){i&1&&(r(0,"p")(1,"em"),a(2,"No hay descripci\xF3n disponible."),n()())}function oe(i,t){if(i&1&&(r(0,"a",21),a(1," Vista previa "),n()),i&2){let e=u().$implicit;c("href",e.volumeInfo.previewLink,v)}}function re(i,t){if(i&1){let e=E();r(0,"div")(1,"h3"),a(2),n(),r(3,"button",13),p("click",function(){let m=M(e).$implicit,l=u(2);return w(l.irAResena(m))}),a(4,"Comentar"),n(),d(5,te,1,1,"img",17),r(6,"p")(7,"strong"),a(8,"Autor: "),n(),a(9),n(),d(10,ie,4,1,"p",18)(11,ne,3,0,"ng-template",null,0,L),r(13,"p")(14,"strong"),a(15,"Fecha de publicaci\xF3n: "),n(),r(16,"small"),a(17),n()(),r(18,"p"),d(19,oe,2,1,"a",19),n()()}if(i&2){let e=t.$implicit,o=P(12);s(2),_(e.volumeInfo==null?null:e.volumeInfo.title),s(3),c("ngIf",e.volumeInfo==null||e.volumeInfo.imageLinks==null?null:e.volumeInfo.imageLinks.thumbnail),s(4),H(" ",e.volumeInfo==null||e.volumeInfo.authors==null?null:e.volumeInfo.authors.join(", ")),s(),c("ngIf",e.volumeInfo.description)("ngIfElse",o),s(7),_(e.volumeInfo==null?null:e.volumeInfo.publishedDate),s(2),c("ngIf",e.volumeInfo==null?null:e.volumeInfo.previewLink)}}function ae(i,t){if(i&1&&(r(0,"section",10),d(1,re,20,7,"div",16),n()),i&2){let e=u();s(),c("ngForOf",e.books)}}var G=class i{constructor(t,e,o,m){this.tmdb=t;this.auth=e;this.router=o;this.LibrosService=m}searchText="";isBookSearch=!1;isMovieSearch=!0;loading=!1;books=[];movies=[];ngOnInit(){this.tmdb.peliculas.length>0&&(this.movies=this.tmdb.peliculas)}setSearchType(t){t==="book"?(this.isBookSearch=!0,this.isMovieSearch=!1):(this.isBookSearch=!1,this.isMovieSearch=!0),this.searchText.trim()&&this.unifiedSearch()}unifiedSearch(){this.searchText.trim()&&(this.isBookSearch?this.LibrosService.buscarLibros(this.searchText).subscribe(t=>{this.LibrosService.libros=t.items,this.LibrosService.query=this.searchText,this.books=t.items,this.movies=[]}):this.tmdb.searchMovies(this.searchText).subscribe(t=>{this.tmdb.peliculas=t.results,this.tmdb.query=this.searchText,this.movies=t.results,this.books=[]}))}irAResena(t){this.router.navigate(["/resena",t.id],{state:{movie:t}})}irAMisResenas(){this.router.navigate(["/misresenas"])}async onLogout(){try{await this.auth.logout(),this.router.navigate(["/login"])}catch(t){console.error("Error al cerrar sesi\xF3n:",t)}}static \u0275fac=function(e){return new(e||i)(f(C),f(K),f(R),f(I))};static \u0275cmp=O({type:i,selectors:[["app-home"]],decls:21,vars:7,consts:[["sinDescripcion",""],[1,"home-container"],[1,"botonera"],[1,"resena",3,"click"],[1,"sesion",3,"click"],[1,"search"],["type","text","placeholder","Buscar...",3,"ngModelChange","keyup.enter","ngModel"],["type","radio","name","tipoBusqueda",3,"ngModelChange","change","value","ngModel"],[1,"buscar",3,"click"],["class","results",4,"ngIf"],[1,"results"],["class","movie-card",4,"ngFor","ngForOf"],[1,"movie-card"],[1,"resenar",3,"click"],[3,"src","alt",4,"ngIf"],[3,"src","alt"],[4,"ngFor","ngForOf"],["alt","Portada del libro",3,"src",4,"ngIf"],[4,"ngIf","ngIfElse"],["target","_blank",3,"href",4,"ngIf"],["alt","Portada del libro",3,"src"],["target","_blank",3,"href"]],template:function(e,o){e&1&&(r(0,"div",1)(1,"header")(2,"h1"),a(3,"Cr\xF3nicas de papel y pantalla"),n(),r(4,"div",2)(5,"button",3),p("click",function(){return o.irAMisResenas()}),a(6,"Mis comentarios"),n(),r(7,"button",4),p("click",function(){return o.onLogout()}),a(8,"Cerrar sesi\xF3n"),n()()(),r(9,"section",5)(10,"input",6),k("ngModelChange",function(l){return x(o.searchText,l)||(o.searchText=l),l}),p("keyup.enter",function(){return o.unifiedSearch()}),n(),r(11,"label")(12,"input",7),k("ngModelChange",function(l){return x(o.isBookSearch,l)||(o.isBookSearch=l),l}),p("change",function(){return o.setSearchType("book")}),n(),a(13," Buscar libros "),n(),r(14,"label")(15,"input",7),k("ngModelChange",function(l){return x(o.isBookSearch,l)||(o.isBookSearch=l),l}),p("change",function(){return o.setSearchType("movie")}),n(),a(16," Buscar pel\xEDculas "),n(),r(17,"button",8),p("click",function(){return o.unifiedSearch()}),a(18,"Buscar"),n()(),d(19,ee,2,1,"section",9)(20,ae,2,1,"section",9),n()),e&2&&(s(10),y("ngModel",o.searchText),s(2),c("value",!0),y("ngModel",o.isBookSearch),s(3),c("value",!1),y("ngModel",o.isBookSearch),s(4),c("ngIf",!o.isBookSearch&&o.movies.length>0),s(),c("ngIf",o.isBookSearch&&(o.books==null?null:o.books.length)))},dependencies:[j,F,A,z,$,N,D,W,q,V],styles:["input[_ngcontent-%COMP%]{display:block;width:90%;height:25px;margin:0 auto;margin-bottom:1rem;border-radius:4px;border:3px solid #000}.buscar[_ngcontent-%COMP%]{display:block;margin:0 auto;background-color:#000;color:#fff;border-color:#fff;padding:.75rem 1.5rem;font-size:1rem;border-radius:8px;cursor:pointer;transition:background-color .3s ease}h1[_ngcontent-%COMP%]{text-align:center;font-size:2rem;padding-bottom:1px}h3[_ngcontent-%COMP%]{text-align:center;font-size:2rem;padding-top:30px}.resenar[_ngcontent-%COMP%]{display:row;margin-left:0;margin-right:auto;background-color:#0d47a1;color:#fff;border-color:#fff;margin-bottom:1rem;font-size:1rem;height:30px;border-radius:4px;cursor:pointer;transition:background-color .3s ease}.botonera[_ngcontent-%COMP%]{margin:0 auto;display:flex;justify-content:space-between;padding:1rem}.botonera[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:6px;cursor:pointer;color:#fff;background-color:#007bff}.izquierda[_ngcontent-%COMP%]{background-color:#ccc;color:#333}.derecha[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}img[_ngcontent-%COMP%]{display:block;margin:0 auto;width:50%;border-radius:8px;margin-top:1rem}p[_ngcontent-%COMP%]{display:block;margin:0 auto;width:50%;font-size:2rem;text-align:justify}@media (max-width: 600px){p[_ngcontent-%COMP%]{width:90%;font-size:1.2rem}}@media (min-width: 601px) and (max-width: 1024px){p[_ngcontent-%COMP%]{width:70%;font-size:1.6rem}}@media (min-width: 1025px){p[_ngcontent-%COMP%]{width:50%;font-size:2rem}}.search[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.search[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.3rem}"]})};export{G as Home};
