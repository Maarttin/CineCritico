import{a as x}from"./chunk-JKZOWFQR.js";import{a as G}from"./chunk-LIO3XGLU.js";import{a as N,c as V,f as W,i as K,p as U}from"./chunk-GSFLE64X.js";import{$ as k,A as s,Ba as D,C as b,D as F,H as u,M as l,N as r,O as i,P as d,Q as g,R as f,S as H,T as _,U as p,V as O,X as a,Y as h,Z as P,_ as M,aa as I,ba as L,ha as B,k as v,n as C,oa as A,pa as j,r as w,s as q,sa as z,ua as S,wa as R,z as y,za as $}from"./chunk-FWRNMML4.js";var T=class t{constructor(n){this.http=n}peliculas=[];query="";baseUrl="https://api.themoviedb.org/3";searchMovies(n){return console.log("Buscando pel\xEDculas con la consulta:",n),this.http.get(`${this.baseUrl}/search/movie`,{params:{api_key:x.tmdbApiKey,query:n}})}getMovieDetails(n){return this.http.get(`${this.baseUrl}/movie/${n}`,{params:{api_key:x.tmdbApiKey}})}static \u0275fac=function(e){return new(e||t)(C(S))};static \u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"})};var E=class t{constructor(n){this.http=n}libros=[];query="";apiKey=x.booksApiKey;Base_url="https://www.googleapis.com/books/v1/volumes?q=";buscarLibros(n){let e=`${this.Base_url}${n}&key=${this.apiKey}`;return console.log(`${this.Base_url}?q=intitle:${n}}&key=${this.apiKey}`),this.http.get(e)}static \u0275fac=function(e){return new(e||t)(C(S))};static \u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"})};function ee(t,n){if(t&1&&d(0,"img",22),t&2){let e=p().$implicit;l("alt",L(e.title))("src","https://image.tmdb.org/t/p/w500"+e.poster_path,y)}}function te(t,n){if(t&1&&(r(0,"p")(1,"strong"),a(2,"Sinopsis: "),i(),a(3),i()),t&2){let e=p().$implicit;s(3),h(e.overview)}}function ne(t,n){t&1&&(r(0,"p")(1,"em"),a(2,"No hay sinopsis disponible."),i()())}function ie(t,n){if(t&1){let e=H();r(0,"div",18)(1,"h3"),a(2),i(),r(3,"button",19),_("click",function(){let m=w(e).$implicit,c=p(4);return q(c.irAResena(m))}),a(4,"Comentar"),i(),u(5,ee,1,3,"img",20)(6,te,4,1,"p",21),d(7,"br"),r(8,"p")(9,"strong"),a(10,"Fecha de lanzamiento: "),r(11,"small"),a(12),i()()(),u(13,ne,3,0,"ng-template",null,0,B),i()}if(t&2){let e=n.$implicit,o=O(14);s(2),h(e.title),s(3),l("ngIf",e.poster_path),s(),l("ngIf",e.overview)("ngIfElse",o),s(6),h(e.release_date)}}function oe(t,n){if(t&1&&(g(0),u(1,ie,15,5,"div",17),f()),t&2){let e=p(3);s(),l("ngForOf",e.movies)}}function re(t,n){t&1&&(g(0),r(1,"p"),a(2,"No se encontraron pel\xEDculas que coincidan con tu b\xFAsqueda."),i(),f())}function ae(t,n){if(t&1&&(r(0,"section",16),u(1,oe,2,1,"ng-container",14)(2,re,3,0,"ng-container",14),i()),t&2){let e=p(2);s(),l("ngIf",e.movies.length>0),s(),l("ngIf",e.busquedaManual&&e.movies.length===0)}}function se(t,n){if(t&1&&(g(0),u(1,ae,3,2,"section",15),f()),t&2){let e=p();s(),l("ngIf",e.tipoBusqueda==="pelicula")}}function le(t,n){if(t&1&&d(0,"img",26),t&2){let e=p().$implicit;l("src",e.volumeInfo.imageLinks.thumbnail,y)}}function ce(t,n){if(t&1&&(r(0,"p")(1,"strong"),a(2,"Descripci\xF3n:"),i(),a(3),i()),t&2){let e=p().$implicit;s(3),P(" ",e.volumeInfo==null?null:e.volumeInfo.description)}}function me(t,n){t&1&&(r(0,"p")(1,"em"),a(2,"No hay descripci\xF3n disponible."),i()())}function pe(t,n){if(t&1&&(r(0,"a",27),a(1," Vista previa "),i()),t&2){let e=p().$implicit;l("href",e.volumeInfo.previewLink,y)}}function ue(t,n){if(t&1){let e=H();r(0,"div")(1,"h3"),a(2),i(),r(3,"button",19),_("click",function(){let m=w(e).$implicit,c=p(4);return q(c.irAResena(m))}),a(4,"Comentar"),i(),u(5,le,1,1,"img",24),r(6,"p")(7,"strong"),a(8,"Autor: "),i(),a(9),i(),d(10,"br"),u(11,ce,4,1,"p",21)(12,me,3,0,"ng-template",null,1,B),d(14,"br"),r(15,"p")(16,"strong"),a(17,"Fecha de publicaci\xF3n: "),i(),r(18,"small"),a(19),i()(),d(20,"br"),r(21,"p"),u(22,pe,2,1,"a",25),i()()}if(t&2){let e=n.$implicit,o=O(13);s(2),h(e.volumeInfo==null?null:e.volumeInfo.title),s(3),l("ngIf",e.volumeInfo==null||e.volumeInfo.imageLinks==null?null:e.volumeInfo.imageLinks.thumbnail),s(4),P(" ",e.volumeInfo==null||e.volumeInfo.authors==null?null:e.volumeInfo.authors.join(", ")),s(2),l("ngIf",e.volumeInfo.description)("ngIfElse",o),s(8),h(e.volumeInfo==null?null:e.volumeInfo.publishedDate),s(3),l("ngIf",e.volumeInfo==null?null:e.volumeInfo.previewLink)}}function _e(t,n){if(t&1&&(g(0),u(1,ue,23,7,"div",23),f()),t&2){let e=p(3);s(),l("ngForOf",e.books)}}function de(t,n){t&1&&(g(0),r(1,"p"),a(2,"No se encontraron libros que coincidan con tu b\xFAsqueda."),i(),f())}function ge(t,n){if(t&1&&(r(0,"section",16),u(1,_e,2,1,"ng-container",14)(2,de,3,0,"ng-container",14),i()),t&2){let e=p(2);s(),l("ngIf",e.books.length>0),s(),l("ngIf",e.busquedaManual&&e.books.length===0)}}function fe(t,n){if(t&1&&(g(0),u(1,ge,3,2,"section",15),f()),t&2){let e=p();s(),l("ngIf",e.tipoBusqueda==="libro")}}var Q=class t{constructor(n,e,o,m){this.tmdb=n;this.auth=e;this.router=o;this.LibrosService=m}searchText="";tipoBusqueda="";loading=!1;books=[];movies=[];busqueda=!1;resultadosCargados=!1;busquedaManual=!1;onBuscarClick(){this.busquedaManual=!0,this.unifiedSearch()}ngOnInit(){this.tmdb.peliculas.length>0&&(this.movies=this.tmdb.peliculas)}clean(){this.searchText="",this.tipoBusqueda=""}onTipoBusquedaChange(){this.searchText.trim()&&this.unifiedSearch(),this.busquedaManual=!1}onSearchTextChange(n){this.searchText=n,n.trim()||(this.tipoBusqueda="",this.limpiarResultados())}limpiarResultados(){this.books=[],this.movies=[],this.busqueda=!1}unifiedSearch(){if(!this.searchText.trim()){alert("Escribe algo para buscar.");return}if(!this.tipoBusqueda){alert("Por favor selecciona si quieres buscar libros o pel\xEDculas.");return}this.busqueda=!0,this.resultadosCargados=!1,this.tipoBusqueda==="libro"?this.LibrosService.buscarLibros(this.searchText).subscribe(n=>{this.LibrosService.libros=n.items,this.LibrosService.query=this.searchText,this.books=n.items,this.movies=[],this.resultadosCargados=!0}):this.tmdb.searchMovies(this.searchText).subscribe(n=>{this.tmdb.peliculas=n.results,this.tmdb.query=this.searchText,this.movies=n.results,this.books=[],this.resultadosCargados=!0})}irAResena(n){this.router.navigate(["/resena",n.id],{state:{movie:n}})}irAMisResenas(){this.router.navigate(["/misresenas"])}async onLogout(){try{await this.auth.logout(),this.router.navigate(["/login"])}catch(n){console.error("Error al cerrar sesi\xF3n:",n)}}static \u0275fac=function(e){return new(e||t)(b(T),b(G),b($),b(E))};static \u0275cmp=F({type:t,selectors:[["app-home"]],decls:25,vars:7,consts:[["sinSinopsis",""],["sinDescripcion",""],[1,"home-container"],[1,"botonera"],[1,"resena",3,"click"],[1,"sesion",3,"click"],[1,"search"],[1,"search-box"],["type","text","placeholder","Buscar...",1,"entrada",3,"ngModelChange","keyup.enter","ngModel"],[1,"clean",3,"click"],[1,"search-radios"],["type","radio","name","tipoBusqueda","value","libro",3,"ngModelChange","ngModel","disabled"],["type","radio","name","tipoBusqueda","value","pelicula",3,"ngModelChange","ngModel","disabled"],[1,"buscar",3,"click"],[4,"ngIf"],["class","results",4,"ngIf"],[1,"results"],["class","movie-card",4,"ngFor","ngForOf"],[1,"movie-card"],[1,"resenar",3,"click"],[3,"src","alt",4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"src","alt"],[4,"ngFor","ngForOf"],["alt","Portada del libro",3,"src",4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],["alt","Portada del libro",3,"src"],["target","_blank",3,"href"]],template:function(e,o){e&1&&(r(0,"div",2)(1,"header")(2,"h1"),a(3,"Cr\xF3nicas de papel y pantalla"),i(),r(4,"div",3)(5,"button",4),_("click",function(){return o.irAMisResenas()}),a(6,"Mis comentarios"),i(),r(7,"button",5),_("click",function(){return o.onLogout()}),a(8,"Cerrar sesi\xF3n"),i()()(),r(9,"section",6)(10,"div",7)(11,"input",8),I("ngModelChange",function(c){return k(o.searchText,c)||(o.searchText=c),c}),_("keyup.enter",function(){return o.unifiedSearch()})("ngModelChange",function(c){return o.onSearchTextChange(c)}),i(),r(12,"button",9),_("click",function(){return o.clean()}),a(13,"Borrar"),i()(),r(14,"div",10)(15,"label")(16,"input",11),I("ngModelChange",function(c){return k(o.tipoBusqueda,c)||(o.tipoBusqueda=c),c}),_("ngModelChange",function(){return o.onTipoBusquedaChange()}),i(),a(17," Libros "),i(),r(18,"label")(19,"input",12),I("ngModelChange",function(c){return k(o.tipoBusqueda,c)||(o.tipoBusqueda=c),c}),_("ngModelChange",function(){return o.onTipoBusquedaChange()}),i(),a(20," Pel\xEDculas "),i()(),r(21,"button",13),_("click",function(){return o.onBuscarClick()}),a(22,"Buscar"),i()(),u(23,se,2,1,"ng-container",14)(24,fe,2,1,"ng-container",14),i()),e&2&&(s(11),M("ngModel",o.searchText),s(5),M("ngModel",o.tipoBusqueda),l("disabled",!o.searchText.trim()),s(3),M("ngModel",o.tipoBusqueda),l("disabled",!o.searchText.trim()),s(4),l("ngIf",o.busqueda),s(),l("ngIf",o.busqueda))},dependencies:[z,A,j,R,D,U,N,K,V,W],styles:[".search-box[_ngcontent-%COMP%]{width:100%;margin:0 auto;display:flex;justify-content:center}.search-radios[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;gap:1.5rem;margin-bottom:.5rem}.search[_ngcontent-%COMP%]{width:100%;margin:2rem auto 1rem;display:flex;flex-direction:column;align-items:center;gap:1rem}input.entrada[_ngcontent-%COMP%]{width:90%;max-width:1000px;height:48px;margin:0 auto 1rem;border-radius:8px;border:3px solid #000;font-size:1.3rem;padding:0 1rem;box-sizing:border-box}.search[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;margin:0 .5rem}input[type=radio][_ngcontent-%COMP%]{display:inline-block;transform:scale(1);cursor:pointer}.buscar[_ngcontent-%COMP%]{display:block;margin:0 auto;background-color:#000;color:#fff;border-color:#fff;padding:.75rem 1.5rem;font-size:1rem;border-radius:8px;cursor:pointer;transition:background-color .3s ease}h1[_ngcontent-%COMP%]{text-align:center;font-size:2rem;padding-bottom:1px}h3[_ngcontent-%COMP%]{text-align:center;font-size:1.5rem;padding-top:1px}.resenar[_ngcontent-%COMP%]{display:row;margin-left:10%;margin-right:auto;background-color:#0d47a1;color:#fff;border-color:#fff;margin-bottom:1rem;font-size:1rem;height:30px;border-radius:8px;cursor:pointer;transition:background-color .3s ease}.botonera[_ngcontent-%COMP%]{margin:0 auto;display:flex;justify-content:space-between;padding:1rem}.botonera[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:6px;cursor:pointer;color:#fff;background-color:#007bff}.izquierda[_ngcontent-%COMP%]{background-color:#ccc;color:#333}.derecha[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}img[_ngcontent-%COMP%]{display:block;margin:0 auto;width:50%;max-width:700px;border-radius:8px;margin-top:1rem;padding-bottom:2rem}.clean[_ngcontent-%COMP%]{display:inline-block;margin-bottom:1rem;margin-right:.5rem;margin-left:.5rem;padding:.5rem .9rem;border:1px solid #ccc;border-radius:6px;background:#f7f7f7;cursor:pointer}p[_ngcontent-%COMP%]{display:block;margin:0 auto;width:50%;font-size:2rem;text-align:justify}@media (max-width: 600px){p[_ngcontent-%COMP%]{width:90%;font-size:1.2rem}}@media (min-width: 601px) and (max-width: 1024px){p[_ngcontent-%COMP%]{width:70%;font-size:1.6rem}.botonera[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px}}@media (min-width: 1025px){p[_ngcontent-%COMP%]{width:60%;font-size:2rem}input[_ngcontent-%COMP%]{height:40px}.botonera[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:200px;margin-right:200px}}"]})};export{Q as Home};
