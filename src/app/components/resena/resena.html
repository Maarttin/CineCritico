<div class="tarjeta">
  <h2>Comentario</h2>
  <button class="volver" (click)="irAHome()">Volver</button>

  <div *ngIf="movie">
    <h3>{{ movie.title || movie.volumeInfo?.title }}</h3>
    <img *ngIf="movie.poster_path" [src]="'https://image.tmdb.org/t/p/w500' + movie.poster_path" alt="{{ movie.title }}" />
    <img *ngIf="movie.volumeInfo?.imageLinks?.thumbnail" [src]="movie.volumeInfo.imageLinks.thumbnail" alt="{{ movie.volumeInfo?.title }}" />
    <p>{{ movie.overview || movie.volumeInfo?.description }}</p>
    <p *ngIf="movie.volumeInfo?.authors">Autor: {{ movie.volumeInfo.authors.join(', ') }}</p>
    <small *ngIf="movie.volumeInfo?.publishedDate">Publicado: {{ movie.volumeInfo.publishedDate }}</small>
  </div>

  <form [formGroup]="resenaForm" (ngSubmit)="guardarResena()" *ngIf="movie">
    <label for="comentario">Tu comentario:</label>
    <textarea id="comentario" formControlName="comentario" placeholder="Escribe tu comentario..." rows="1" (input)="autoResize($event)"  style="overflow:hidden; resize:none;" required></textarea>

    <label for="calificacion">Calificación (1–10):</label>
    <input type="number" id="calificacion" formControlName="calificacion" min="1" max="10" />

    <button class="resena" type="submit" [disabled]="resenaForm.invalid">Comentar</button>
  </form>

  <p *ngIf="message">{{ message }}</p>
</div>