import{a as x}from"./chunk-JKZOWFQR.js";import{a as G}from"./chunk-LIO3XGLU.js";import{a as N,c as V,f as W,i as K,p as U}from"./chunk-GSFLE64X.js";import{$ as I,A as l,Ba as D,C as g,D as L,H as _,M as s,N as r,O as n,P,Q as f,R as h,S as B,T as u,U as c,V as b,X as a,Y as d,Z as F,_ as S,aa as E,ba as R,ha as v,k as y,n as k,oa as q,pa as A,r as H,s as O,sa as j,ua as M,wa as z,z as C,za as $}from"./chunk-FWRNMML4.js";var T=class t{constructor(i){this.http=i}peliculas=[];query="";baseUrl="https://api.themoviedb.org/3";searchMovies(i){return this.http.get(`${this.baseUrl}/search/movie`,{params:{api_key:x.tmdbApiKey,query:i}})}getMovieDetails(i){return this.http.get(`${this.baseUrl}/movie/${i}`,{params:{api_key:x.tmdbApiKey}})}static \u0275fac=function(e){return new(e||t)(k(M))};static \u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})};var w=class t{constructor(i){this.http=i}libros=[];query="";apiKey=x.booksApiKey;Base_url="https://www.googleapis.com/books/v1/volumes?q=";buscarLibros(i){let e=`${this.Base_url}${i}&key=${this.apiKey}`;return console.log(`${this.Base_url}?q=intitle:${i}}&key=${this.apiKey}`),this.http.get(e)}static \u0275fac=function(e){return new(e||t)(k(M))};static \u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})};function ee(t,i){if(t&1&&P(0,"img",20),t&2){let e=c().$implicit;s("alt",R(e.title))("src","https://image.tmdb.org/t/p/w500"+e.poster_path,C)}}function te(t,i){if(t&1&&(r(0,"p")(1,"strong"),a(2,"Sinopsis: "),n(),a(3),n()),t&2){let e=c().$implicit;l(3),d(e.overview)}}function ie(t,i){t&1&&(r(0,"p")(1,"em"),a(2,"No hay sinopsis disponible."),n()())}function ne(t,i){if(t&1){let e=B();r(0,"div",17)(1,"h3"),a(2),n(),r(3,"button",18),u("click",function(){let p=H(e).$implicit,m=c(4);return O(m.irAResena(p))}),a(4,"Comentar"),n(),_(5,ee,1,3,"img",19)(6,te,4,1,"p",15),r(7,"p")(8,"strong"),a(9,"Fecha de lanzamiento: "),r(10,"small"),a(11),n()()(),_(12,ie,3,0,"ng-template",null,1,v),n()}if(t&2){let e=i.$implicit,o=b(13);l(2),d(e.title),l(3),s("ngIf",e.poster_path),l(),s("ngIf",e.overview)("ngIfElse",o),l(5),d(e.release_date)}}function oe(t,i){if(t&1&&(f(0),_(1,ne,14,5,"div",16),h()),t&2){let e=c(3);l(),s("ngForOf",e.movies)}}function re(t,i){if(t&1&&(r(0,"section",14),_(1,oe,2,1,"ng-container",15),n()),t&2){c();let e=b(3),o=c();l(),s("ngIf",o.movies.length>0)("ngIfElse",e)}}function ae(t,i){t&1&&(r(0,"p"),a(1,"No se encontraron pel\xEDculas que coincidan con tu b\xFAsqueda."),n())}function le(t,i){if(t&1&&(f(0),_(1,re,2,2,"section",13)(2,ae,2,0,"ng-template",null,0,v),h()),t&2){let e=c();l(),s("ngIf",!e.isBookSearch)}}function se(t,i){if(t&1&&P(0,"img",24),t&2){let e=c().$implicit;s("src",e.volumeInfo.imageLinks.thumbnail,C)}}function ce(t,i){if(t&1&&(r(0,"p")(1,"strong"),a(2,"Descripci\xF3n:"),n(),a(3),n()),t&2){let e=c().$implicit;l(3),F(" ",e.volumeInfo==null?null:e.volumeInfo.description)}}function me(t,i){t&1&&(r(0,"p")(1,"em"),a(2,"No hay descripci\xF3n disponible."),n()())}function pe(t,i){if(t&1&&(r(0,"a",25),a(1," Vista previa "),n()),t&2){let e=c().$implicit;s("href",e.volumeInfo.previewLink,C)}}function _e(t,i){if(t&1){let e=B();r(0,"div")(1,"h3"),a(2),n(),r(3,"button",18),u("click",function(){let p=H(e).$implicit,m=c(4);return O(m.irAResena(p))}),a(4,"Comentar"),n(),_(5,se,1,1,"img",22),r(6,"p")(7,"strong"),a(8,"Autor: "),n(),a(9),n(),_(10,ce,4,1,"p",15)(11,me,3,0,"ng-template",null,3,v),r(13,"p")(14,"strong"),a(15,"Fecha de publicaci\xF3n: "),n(),r(16,"small"),a(17),n()(),r(18,"p"),_(19,pe,2,1,"a",23),n()()}if(t&2){let e=i.$implicit,o=b(12);l(2),d(e.volumeInfo==null?null:e.volumeInfo.title),l(3),s("ngIf",e.volumeInfo==null||e.volumeInfo.imageLinks==null?null:e.volumeInfo.imageLinks.thumbnail),l(4),F(" ",e.volumeInfo==null||e.volumeInfo.authors==null?null:e.volumeInfo.authors.join(", ")),l(),s("ngIf",e.volumeInfo.description)("ngIfElse",o),l(7),d(e.volumeInfo==null?null:e.volumeInfo.publishedDate),l(2),s("ngIf",e.volumeInfo==null?null:e.volumeInfo.previewLink)}}function ue(t,i){if(t&1&&(f(0),_(1,_e,20,7,"div",21),h()),t&2){let e=c(3);l(),s("ngForOf",e.books)}}function de(t,i){if(t&1&&(r(0,"section",14),_(1,ue,2,1,"ng-container",15),n()),t&2){c();let e=b(3),o=c();l(),s("ngIf",o.books.length>0)("ngIfElse",e)}}function ge(t,i){t&1&&(r(0,"p"),a(1,"No se encontraron libros que coincidan con tu b\xFAsqueda."),n())}function fe(t,i){if(t&1&&(f(0),_(1,de,2,2,"section",13)(2,ge,2,0,"ng-template",null,2,v),h()),t&2){let e=c();l(),s("ngIf",e.isBookSearch)}}var Q=class t{constructor(i,e,o,p){this.tmdb=i;this.auth=e;this.router=o;this.LibrosService=p}searchText="";isBookSearch=!1;isMovieSearch=!0;loading=!1;books=[];movies=[];busqueda=!1;ngOnInit(){this.tmdb.peliculas.length>0&&(this.movies=this.tmdb.peliculas)}setSearchType(i){i==="book"?(this.isBookSearch=!0,this.isMovieSearch=!1):(this.isBookSearch=!1,this.isMovieSearch=!0),this.searchText.trim()&&this.unifiedSearch()}unifiedSearch(){this.searchText.trim()&&(this.busqueda=!0,this.isBookSearch?this.LibrosService.buscarLibros(this.searchText).subscribe(i=>{this.LibrosService.libros=i.items,this.LibrosService.query=this.searchText,this.books=i.items,this.movies=[]}):this.tmdb.searchMovies(this.searchText).subscribe(i=>{this.tmdb.peliculas=i.results,this.tmdb.query=this.searchText,this.movies=i.results,this.books=[]}))}irAResena(i){this.router.navigate(["/resena",i.id],{state:{movie:i}})}irAMisResenas(){this.router.navigate(["/misresenas"])}async onLogout(){try{await this.auth.logout(),this.router.navigate(["/login"])}catch(i){console.error("Error al cerrar sesi\xF3n:",i)}}static \u0275fac=function(e){return new(e||t)(g(T),g(G),g($),g(w))};static \u0275cmp=L({type:t,selectors:[["app-home"]],decls:21,vars:7,consts:[["sinResultados",""],["sinSinopsis",""],["sinResultadosl",""],["sinDescripcion",""],[1,"home-container"],[1,"botonera"],[1,"resena",3,"click"],[1,"sesion",3,"click"],[1,"search"],["type","text","placeholder","Buscar...",3,"ngModelChange","keyup.enter","ngModel"],["type","radio","name","tipoBusqueda",3,"ngModelChange","change","value","ngModel"],[1,"buscar",3,"click"],[4,"ngIf"],["class","results",4,"ngIf"],[1,"results"],[4,"ngIf","ngIfElse"],["class","movie-card",4,"ngFor","ngForOf"],[1,"movie-card"],[1,"resenar",3,"click"],[3,"src","alt",4,"ngIf"],[3,"src","alt"],[4,"ngFor","ngForOf"],["alt","Portada del libro",3,"src",4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],["alt","Portada del libro",3,"src"],["target","_blank",3,"href"]],template:function(e,o){e&1&&(r(0,"div",4)(1,"header")(2,"h1"),a(3,"Cr\xF3nicas de papel y pantalla"),n(),r(4,"div",5)(5,"button",6),u("click",function(){return o.irAMisResenas()}),a(6,"Mis comentarios"),n(),r(7,"button",7),u("click",function(){return o.onLogout()}),a(8,"Cerrar sesi\xF3n"),n()()(),r(9,"section",8)(10,"input",9),E("ngModelChange",function(m){return I(o.searchText,m)||(o.searchText=m),m}),u("keyup.enter",function(){return o.unifiedSearch()}),n(),r(11,"label")(12,"input",10),E("ngModelChange",function(m){return I(o.isBookSearch,m)||(o.isBookSearch=m),m}),u("change",function(){return o.setSearchType("book")}),n(),a(13," Buscar libros "),n(),r(14,"label")(15,"input",10),E("ngModelChange",function(m){return I(o.isBookSearch,m)||(o.isBookSearch=m),m}),u("change",function(){return o.setSearchType("movie")}),n(),a(16," Buscar pel\xEDculas "),n(),r(17,"button",11),u("click",function(){return o.unifiedSearch()}),a(18,"Buscar"),n()(),_(19,le,4,1,"ng-container",12)(20,fe,4,1,"ng-container",12),n()),e&2&&(l(10),S("ngModel",o.searchText),l(2),s("value",!0),S("ngModel",o.isBookSearch),l(3),s("value",!1),S("ngModel",o.isBookSearch),l(4),s("ngIf",o.busqueda),l(),s("ngIf",o.busqueda))},dependencies:[j,q,A,z,D,U,N,K,V,W],styles:["input[_ngcontent-%COMP%]{display:block;width:90%;height:25px;margin:0 auto;margin-bottom:1rem;border-radius:4px;border:3px solid #000}.buscar[_ngcontent-%COMP%]{display:block;margin:0 auto;background-color:#000;color:#fff;border-color:#fff;padding:.75rem 1.5rem;font-size:1rem;border-radius:8px;cursor:pointer;transition:background-color .3s ease}h1[_ngcontent-%COMP%]{text-align:center;font-size:2rem;padding-bottom:1px}h3[_ngcontent-%COMP%]{text-align:center;font-size:2rem;padding-top:30px}.resenar[_ngcontent-%COMP%]{display:row;margin-left:0;margin-right:auto;background-color:#0d47a1;color:#fff;border-color:#fff;margin-bottom:1rem;font-size:1rem;height:30px;border-radius:4px;cursor:pointer;transition:background-color .3s ease}.botonera[_ngcontent-%COMP%]{margin:0 auto;display:flex;justify-content:space-between;padding:1rem}.botonera[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:6px;cursor:pointer;color:#fff;background-color:#007bff}.izquierda[_ngcontent-%COMP%]{background-color:#ccc;color:#333}.derecha[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}img[_ngcontent-%COMP%]{display:block;margin:0 auto;width:50%;border-radius:8px;margin-top:1rem;padding-bottom:2rem}p[_ngcontent-%COMP%]{display:block;margin:0 auto;width:50%;font-size:2rem;text-align:justify}@media (max-width: 600px){p[_ngcontent-%COMP%]{width:90%;font-size:1.2rem}}@media (min-width: 601px) and (max-width: 1024px){p[_ngcontent-%COMP%]{width:70%;font-size:1.6rem}}@media (min-width: 1025px){p[_ngcontent-%COMP%]{width:50%;font-size:2rem}}.search[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.search[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.3rem}"]})};export{Q as Home};
