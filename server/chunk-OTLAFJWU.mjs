import './polyfills.server.mjs';
import{a as y}from"./chunk-FVTTCWXS.mjs";import{a as F}from"./chunk-3MMBQDRY.mjs";import{$ as b,H as w,I as n,Ja as H,K as d,Ka as P,La as E,M,Q as u,Ua as S,Wa as T,Y as c,Z as o,_ as r,aa as v,ab as z,ba as f,ca as g,cb as A,da as I,fa as a,ga as x,h as C,k,ka as O,p as l,q as p}from"./chunk-THEB3H2P.mjs";import"./chunk-N7QBYMCK.mjs";var h=class i{constructor(t){this.http=t}baseUrl="https://api.themoviedb.org/3";searchMovies(t){return this.http.get(`${this.baseUrl}/search/movie`,{params:{api_key:y.tmdbApiKey,query:t}})}getMovieDetails(t){return this.http.get(`${this.baseUrl}/movie/${t}`,{params:{api_key:y.tmdbApiKey}})}static \u0275fac=function(e){return new(e||i)(k(S))};static \u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})};function D(i,t){if(i&1&&b(0,"img",12),i&2){let e=g().$implicit;c("alt",O(e.title))("src","https://image.tmdb.org/t/p/w500"+e.poster_path,w)}}function B(i,t){if(i&1){let e=v();o(0,"div",9)(1,"h3"),a(2),r(),o(3,"button",10),f("click",function(){let m=l(e).$implicit,_=g(2);return p(_.irAResena(m))}),a(4,"Rese\xF1ar"),r(),o(5,"p"),a(6),r(),u(7,D,1,3,"img",11),r()}if(i&2){let e=t.$implicit;n(2),x(e.title),n(4),x(e.overview),n(),c("ngIf",e.poster_path)}}function N(i,t){if(i&1&&(o(0,"section",7),u(1,B,8,3,"div",8),r()),i&2){let e=g();n(),c("ngForOf",e.movies)}}var V=class i{constructor(t,e,s){this.tmdb=t;this.auth=e;this.router=s}movies=[];search(t){this.tmdb.searchMovies(t).subscribe(e=>{this.movies=e.results})}irAResena(t){this.router.navigate(["/resena",t.id],{state:{movie:t}})}async onLogout(){try{await this.auth.logout(),this.router.navigate(["/login"])}catch(t){console.error("Error al cerrar sesi\xF3n:",t)}}static \u0275fac=function(e){return new(e||i)(d(h),d(F),d(z))};static \u0275cmp=M({type:i,selectors:[["app-home"]],decls:10,vars:1,consts:[["searchBox",""],[1,"home-container"],[1,"sesion",3,"click"],[1,"search"],["type","text","placeholder","Buscar pel\xEDcula..."],[1,"buscar",3,"click"],["class","results",4,"ngIf"],[1,"results"],["class","movie-card",4,"ngFor","ngForOf"],[1,"movie-card"],[1,"resena",3,"click"],[3,"src","alt",4,"ngIf"],[3,"src","alt"]],template:function(e,s){if(e&1){let m=v();o(0,"div",1)(1,"header")(2,"button",2),f("click",function(){return l(m),p(s.onLogout())}),a(3,"Cerrar sesi\xF3n"),r()(),o(4,"section",3),b(5,"input",4,0),o(7,"button",5),f("click",function(){l(m);let j=I(6);return p(s.search(j.value))}),a(8,"Buscar"),r()(),u(9,N,2,1,"section",6),r()}e&2&&(n(9),c("ngIf",s.movies.length>0))},dependencies:[E,H,P,T,A],styles:[".home-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;font-family:Arial,sans-serif;background-color:#f0f4ff;min-height:100vh}.sesion[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:0;margin-bottom:1rem;background-color:#770808;color:#faebd7;border-radius:4px;height:30px}input[_ngcontent-%COMP%]{display:block;width:300px;height:25px;margin:0 auto;margin-bottom:1rem;border-radius:4px;border:3px solid #000}.buscar[_ngcontent-%COMP%]{display:block;margin:0 auto;background-color:#000;color:#fff;border-color:#fff;padding:.75rem 1.5rem;font-size:1rem;border-radius:8px;cursor:pointer;transition:background-color .3s ease}h3[_ngcontent-%COMP%]{text-align:center;font-size:2rem;padding-top:30px}.resena[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:350px;background-color:#0d47a1;color:#fff;border-color:#fff;padding:.75rem 1.5rem;font-size:1rem;border-radius:8px;cursor:pointer;transition:background-color .3s ease}img[_ngcontent-%COMP%]{display:block;margin:0 auto;width:50%;border-radius:8px;margin-top:1rem}p[_ngcontent-%COMP%]{display:block;margin:0 auto;width:50%;font-size:2rem;text-align:justify}@media (max-width: 600px){p[_ngcontent-%COMP%]{width:90%;font-size:1.2rem}}@media (min-width: 601px) and (max-width: 1024px){p[_ngcontent-%COMP%]{width:70%;font-size:1.6rem}}@media (min-width: 1025px){p[_ngcontent-%COMP%]{width:50%;font-size:2rem}}"]})};export{V as Home};
