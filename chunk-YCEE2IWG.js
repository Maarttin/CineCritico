import{a as v}from"./chunk-3MVTGTK5.js";import{a as U}from"./chunk-LIO3XGLU.js";import{a as R,c as B,f as D,o as N}from"./chunk-L5ZPA45I.js";import{$ as O,A as c,Ba as A,C as p,D as k,H as f,M as u,N as o,O as r,P as w,S as q,T as m,U as g,X as a,Y as b,_ as I,aa as S,ba as P,k as d,n as y,oa as H,pa as E,r as x,s as C,sa as T,ua as F,wa as j,z as M,za as z}from"./chunk-FWRNMML4.js";var h=class i{constructor(e){this.http=e}baseUrl="https://api.themoviedb.org/3";searchMovies(e){return this.http.get(`${this.baseUrl}/search/movie`,{params:{api_key:v.tmdbApiKey,query:e}})}getMovieDetails(e){return this.http.get(`${this.baseUrl}/movie/${e}`,{params:{api_key:v.tmdbApiKey}})}static \u0275fac=function(t){return new(t||i)(y(F))};static \u0275prov=d({token:i,factory:i.\u0275fac,providedIn:"root"})};var _=class i{peliculas=[];query="";static \u0275fac=function(t){return new(t||i)};static \u0275prov=d({token:i,factory:i.\u0275fac,providedIn:"root"})};function K(i,e){if(i&1&&w(0,"img",13),i&2){let t=g().$implicit;u("alt",P(t.title))("src","https://image.tmdb.org/t/p/w500"+t.poster_path,M)}}function G(i,e){if(i&1){let t=q();o(0,"div",10)(1,"h3"),a(2),r(),o(3,"button",11),m("click",function(){let s=x(t).$implicit,l=g(2);return C(l.irAResena(s))}),a(4,"Rese\xF1ar"),r(),o(5,"p"),a(6),r(),f(7,K,1,3,"img",12),r()}if(i&2){let t=e.$implicit;c(2),b(t.title),c(4),b(t.overview),c(),u("ngIf",t.poster_path)}}function J(i,e){if(i&1&&(o(0,"section",8),f(1,G,8,3,"div",9),r()),i&2){let t=g();c(),u("ngForOf",t.movies)}}var $=class i{constructor(e,t,n,s){this.tmdb=e;this.auth=t;this.router=n;this.busquedaService=s}movies=[];query="";ngOnInit(){this.busquedaService.peliculas.length>0&&(this.movies=this.busquedaService.peliculas)}search(){this.query.trim()&&this.tmdb.searchMovies(this.query).subscribe(e=>{this.busquedaService.peliculas=e.results,this.busquedaService.query=this.query,this.movies=e.results})}irAResena(e){this.router.navigate(["/resena",e.id],{state:{movie:e}})}irAMisResenas(){this.router.navigate(["/misresenas"])}async onLogout(){try{await this.auth.logout(),this.router.navigate(["/login"])}catch(e){console.error("Error al cerrar sesi\xF3n:",e)}}static \u0275fac=function(t){return new(t||i)(p(h),p(U),p(z),p(_))};static \u0275cmp=k({type:i,selectors:[["app-home"]],decls:14,vars:2,consts:[[1,"home-container"],[1,"botonera"],[1,"resena",3,"click"],[1,"sesion",3,"click"],[1,"search"],["type","text","placeholder","Buscar pel\xEDcula ",3,"ngModelChange","keyup.enter","ngModel"],[1,"buscar",3,"click"],["class","results",4,"ngIf"],[1,"results"],["class","movie-card",4,"ngFor","ngForOf"],[1,"movie-card"],[1,"resenar",3,"click"],[3,"src","alt",4,"ngIf"],[3,"src","alt"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"header")(2,"h1"),a(3,"Cr\xF3nicas de papel y pantalla"),r(),o(4,"div",1)(5,"button",2),m("click",function(){return n.irAMisResenas()}),a(6,"Mis rese\xF1as"),r(),o(7,"button",3),m("click",function(){return n.onLogout()}),a(8,"Cerrar sesi\xF3n"),r()()(),o(9,"section",4)(10,"input",5),S("ngModelChange",function(l){return O(n.query,l)||(n.query=l),l}),m("keyup.enter",function(){return n.search()}),r(),o(11,"button",6),m("click",function(){return n.search()}),a(12,"Buscar"),r()(),f(13,J,2,1,"section",7),r()),t&2&&(c(10),I("ngModel",n.query),c(3),u("ngIf",n.movies.length>0))},dependencies:[T,H,E,j,A,N,R,B,D],styles:["input[_ngcontent-%COMP%]{display:block;width:90%;height:25px;margin:0 auto;margin-bottom:1rem;border-radius:4px;border:3px solid #000}.buscar[_ngcontent-%COMP%]{display:block;margin:0 auto;background-color:#000;color:#fff;border-color:#fff;padding:.75rem 1.5rem;font-size:1rem;border-radius:8px;cursor:pointer;transition:background-color .3s ease}h1[_ngcontent-%COMP%]{text-align:center;font-size:2rem;padding-bottom:1px}h3[_ngcontent-%COMP%]{text-align:center;font-size:2rem;padding-top:30px}.resenar[_ngcontent-%COMP%]{display:row;margin-left:0;margin-right:auto;background-color:#0d47a1;color:#fff;border-color:#fff;margin-bottom:1rem;font-size:1rem;height:30px;border-radius:4px;cursor:pointer;transition:background-color .3s ease}.botonera[_ngcontent-%COMP%]{margin:0 auto;display:flex;justify-content:space-between;padding:1rem}.botonera[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:6px;cursor:pointer;color:#fff;background-color:#007bff}.izquierda[_ngcontent-%COMP%]{background-color:#ccc;color:#333}.derecha[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}img[_ngcontent-%COMP%]{display:block;margin:0 auto;width:50%;border-radius:8px;margin-top:1rem}p[_ngcontent-%COMP%]{display:block;margin:0 auto;width:50%;font-size:2rem;text-align:justify}@media (max-width: 600px){p[_ngcontent-%COMP%]{width:90%;font-size:1.2rem}}@media (min-width: 601px) and (max-width: 1024px){p[_ngcontent-%COMP%]{width:70%;font-size:1.6rem}}@media (min-width: 1025px){p[_ngcontent-%COMP%]{width:50%;font-size:2rem}}"]})};export{$ as Home};
